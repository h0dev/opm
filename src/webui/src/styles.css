body {
	@apply antialiased;
	@apply h-full;
	@apply overscroll-none;
	@apply text-base;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

html {
	@apply h-full;
	@apply bg-zinc-950;
	touch-action: manipulation;
}

/* ========================================================================
   CRITICAL: Prevent FOUC - Navigation Alignment Fix
   ======================================================================== */
/* Force navigation left alignment from first render */
nav {
	display: flex !important;
	justify-content: flex-start !important;
	align-items: center !important;
	width: 100% !important; /* Ensure nav container takes full width */
}

nav > div {
	display: flex !important;
	justify-content: flex-start !important;
	align-items: center !important;
	gap: 0.75rem;
	width: 100% !important;
	max-width: 100% !important; /* Override layout constraints */
	margin-left: 0 !important;
	margin-right: 0 !important;
}

/* Prevent flex-1 from causing centering */
nav > div > div {
	justify-content: flex-start !important;
}

/* Navigation link styles */
nav a {
	white-space: nowrap;
	flex-shrink: 0;
}

/* ========================================================================
   TOGGLE SWITCH (Pill Shape with Gap)
   ======================================================================== */
/* Logic căn chỉnh:
   - Sử dụng border-radius: 9999px để luôn tròn viên thuốc.
   - Sử dụng padding (khoảng hở) giữa cục tròn và viền ngoài.
*/

button[role="switch"],
.toggle-switch {
	display: inline-flex !important;
	align-items: center !important;
	justify-content: flex-start !important;
	vertical-align: middle !important;
	flex-shrink: 0 !important;
	position: relative !important;
	cursor: pointer;
	
	/* Shape */
	border-radius: 9999px !important;
	border: 1px solid transparent !important;
	box-sizing: border-box !important;

	/* Mobile: width 2.25rem (36px), height 1.25rem (20px) */
	width: 2.25rem !important; 
	height: 1.25rem !important; 
	
	/* Smooth transition for background */
	transition-property: background-color, border-color, color;
	transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
	transition-duration: 200ms;
}

/* Knob (Cục tròn) */
button[role="switch"] > span,
.toggle-switch > span {
	margin: 0 !important;
	position: absolute !important;
	top: 50% !important;
	transform: translateY(-50%) !important;
	display: inline-block !important;
	
	border-radius: 9999px !important;
	background-color: white !important;
	line-height: 1 !important;
	vertical-align: middle !important;
	pointer-events: none;
	
	/* Animation di chuyển */
	transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1) !important;

	/* --- MOBILE SPECS --- */
	/* Padding trái: 2px (0.125rem) */
	left: 0.125rem !important;
	/* Size: Track(20px) - Padding(4px) = 16px (1rem) */
	width: 1rem !important; 
	height: 1rem !important; 
}

/* Pin translation when checked - Mobile */
button[role="switch"][aria-checked="true"] > span,
.toggle-switch[aria-checked="true"] > span {
	/* Move: Track(2.25) - Pin(1.0) - PadL(0.125) - PadR(0.125) = 1rem */
	transform: translateY(-50%) translateX(1rem) !important;
}

/* Desktop toggle dimensions */
@media (min-width: 640px) {
	button[role="switch"],
	.toggle-switch {
		/* Desktop: width 3.25rem (52px), height 2rem (32px) */
		width: 3.25rem !important; 
		height: 2rem !important; 
	}

	button[role="switch"] > span,
	.toggle-switch > span {
		/* Padding trái: ~3px (0.1875rem) cho thoáng */
		left: 0.1875rem !important;
		
		/* Size: Track(32px) - Padding(6px) = 26px (1.625rem) */
		width: 1.625rem !important; 
		height: 1.625rem !important; 
	}

	/* Pin translation when checked - Desktop */
	button[role="switch"][aria-checked="true"] > span,
	.toggle-switch[aria-checked="true"] > span {
		/* Move: Track(3.25) - Pin(1.625) - PadL(0.1875)*2 = 1.25rem */
		transform: translateY(-50%) translateX(1.25rem) !important;
	}
}

/* ========================================================================
   RESPONSIVE & UTILITIES (Original functionality preserved)
   ======================================================================== */

/* Mobile-first responsive adjustments */
@media (max-width: 768px) {
	body {
		font-size: 14px;
	}
}

.embed-container {
	width: 100%;
	height: 100%;
	min-height: 400px;
	position: relative;
}

.embed-container iframe {
	width: 100%;
	height: 100%;
	position: absolute;
	top: 0;
	left: 0;
	border: 0;
}

/* Ensure mobile-friendly touch targets */
/* Exclude checkbox and radio inputs which have their own sizing */
@media (max-width: 768px) {
	button:not(.toggle-switch), a, input[type="text"], input[type="email"], input[type="password"], input[type="search"], input[type="url"], select {
		min-height: 36px;
		min-width: 36px;
	}
	
	/* Checkboxes should maintain their specified size but have larger tap area */
	input[type="checkbox"] {
		/* Add padding around checkbox for easier tapping without distorting the checkbox itself */
		padding: 8px;
	}
	
	/* Toggle switches should maintain their designed size and not be affected by min-width/min-height */
	.toggle-switch {
		min-width: auto !important;
		min-height: auto !important;
	}
	
	/* Reduce button padding and font size on mobile for more compact buttons */
	button {
		padding: 0.375rem 0.5rem;  /* py-1.5 px-2 */
		font-size: 0.813rem;  /* ~13px, slightly smaller than text-sm */
	}
	
	/* Reduce menu padding and font size on mobile */
	[role="menu"] a, [role="menuitem"] a {
		padding: 0.375rem 0.5rem;  /* Smaller padding for menu items */
		font-size: 0.813rem;
	}
	
	/* Make menu dropdowns more compact */
	[role="menu"] {
		width: 10rem;  /* Narrower menus on mobile */
		font-size: 0.813rem;
	}
}

/* Smooth transitions for interactive elements */
button, a, input, select {
	transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Enhanced hover effects - only on devices with hover capability (not mobile) */
@media (hover: hover) and (pointer: fine) {
	button:hover, a:hover {
		transform: translateY(-1px);
	}

	button:active, a:active {
		transform: translateY(0);
	}
}

/* Card hover effects - only on devices with hover capability (not mobile) */
.card-hover {
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@media (hover: hover) and (pointer: fine) {
	.card-hover:hover {
		transform: translateY(-2px);
		box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3), 0 8px 10px -6px rgba(0, 0, 0, 0.2);
	}
}

/* Mobile-friendly card active state */
@media (hover: none) or (pointer: coarse) {
	.card-hover:active {
		transform: scale(0.98);
		opacity: 0.9;
	}
}

/* Skeleton loader animation */
@keyframes shimmer {
	0% {
		background-position: -1000px 0;
	}
	100% {
		background-position: 1000px 0;
	}
}

.skeleton {
	animation: shimmer 2s infinite linear;
	background: linear-gradient(
		to right,
		#18181b 4%,
		#27272a 25%,
		#18181b 36%
	);
	background-size: 1000px 100%;
}

/* Fade in animation */
@keyframes fadeIn {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.fade-in {
	animation: fadeIn 0.4s ease-out;
}

/* Pulse animation for status indicators */
@keyframes pulse {
	0%, 100% {
		opacity: 1;
	}
	50% {
		opacity: 0.5;
	}
}

.pulse {
	animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Gradient text effect */
.gradient-text {
	background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 50%, #f472b6 100%);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

/* Custom scrollbar */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background: #18181b;
}

::-webkit-scrollbar-thumb {
	background: #3f3f46;
	border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
	background: #52525b;
}

/* Focus styles for accessibility */
*:focus-visible {
	outline: 2px solid #3b82f6;
	outline-offset: 2px;
}

/* Simple fade-in animation for navbar */
@keyframes navFadeIn {
	0% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}

.nav-container {
	animation: navFadeIn 0.3s ease-out forwards;
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
	.nav-container {
		animation: none;
	}
}
